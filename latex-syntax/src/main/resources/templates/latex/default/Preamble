%% Language and font encodings
\usepackage[$latex.language]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
%% Used for strike through support
\usepackage[normalem]{ulem}
%% Used for image support
\usepackage{graphicx}
%% Used for links
\usepackage{hyperref}
%% Use for quotes and to support nested quotes
\usepackage{csquotes}
%% For the Code macro
\usepackage{minted}
%% For the message macros
\usepackage{pifont,mdframed}
%% For the TOC macro, to have local tocs
\usepackage{etoc}
%% For the Formula macro
\usepackage{amsmath}
%% For links to attachments (we embed the attachments and link to them)
\usepackage{embedfile}
\usepackage{hypgotoe}

%% Message macro environments

\newenvironment{xwikimessage}[1]
${SP}${SP}{\par\begin{mdframed}[linewidth=2pt,linecolor=#1]%
${SP}${SP}${SP}${SP}\begin{list}{}{\leftmargin=1cm
#foreach ($i in [1..19])${SP}#end\labelwidth=\leftmargin}\item[\Large\ding{43}]}
${SP}${SP}{\end{list}\end{mdframed}\par}

\newenvironment{xwikierror}
${SP}${SP}{\begin{xwikimessage}{red}}
${SP}${SP}{\end{xwikimessage}}

\newenvironment{xwikiwarning}
${SP}${SP}{\begin{xwikimessage}{yellow}}
${SP}${SP}{\end{xwikimessage}}

\newenvironment{xwikiinfo}
${SP}${SP}{\begin{xwikimessage}{blue}}
${SP}${SP}{\end{xwikimessage}}

\newenvironment{xwikisuccess}
${SP}${SP}{\begin{xwikimessage}{green}}
${SP}${SP}{\end{xwikimessage}}

%% Set the style of internal references (hyperref)
\hypersetup{colorlinks=true, linkcolor=black, urlcolor=blue}

%% Ensure that images have a max width of 95% of the line width
\makeatletter
\setkeys{Gin}{width=\ifdim\Gin@nat@width>\linewidth
${SP}${SP}0.95\linewidth
\else
${SP}${SP}\Gin@nat@width
\fi}
\makeatother